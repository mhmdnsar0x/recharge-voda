<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <title>Recharge| M.Nassar</title>
  <meta name="description" content="نظام شحن رصيد الهاتف المحمول بسرعة وسهولة. اختر الباقة المناسبة وطريقة الدفع واحصل على الرصيد فوراً.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
      <!-- for background -->
      <div class="background">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
    </div>
    <!-- end -->
  <div class="container">
    <div class="card">
        <!-- Logo -->
      <div style="text-align: center; margin-bottom: 20px;">
        <img src="assets/voda.png" class="title"  alt="Logo" style="max-width: 150px; margin-top:1.5rem">
      </div>
      <h1 class="title"> شحن الرصيد</h1>
      <!-- Form Container -->
      <div id="formContainer" class="form-container">
        <form id="rechargeForm" method="POST" action="/api/submit" enctype="multipart/form-data">
          <!-- Balance Selection -->
          <div class="form-group">
            <label for="balanceInput">اختار كمية الرصيد</label>
            <div class="balance-cash-anim" id="balanceCashAnim">
              <div class="balance-cash-row">
                <input type="number" id="balanceInput" min="20" step="10" placeholder="أدخل قيمة الشحن" />
                <span class="equal-sign" style="align-self: center; font-size: 1.5rem;">=</span>
                <input type="text" id="cashAmount" readonly placeholder="المبلغ المطلوب" />
              </div>
            </div>
          </div>


          <!-- For Traders Button -->
          <button type="button" id="showTraderBtn" class="trader-btn">For Traders</button>

          <!-- Trader code input -->
          <div id="traderRow" class="trader-row">
            <input id="traderCodeInput" type="text" placeholder="Trader code">
            <button type="button" id="applyTraderBtn" class="apply-btn">Apply</button>
            <button type="button" id="closeTraderRow" class="close-trader-row" title="Cancel">&times;</button>
            <div id="traderError" class="error-message hidden"></div>
            </div> 
            <!-- box to show statue for trader code --> 
            <div id="traderLogBox"></div>
          
          <!-- balance vs cash info-box -->
          <div id="balanceInfo" class="info-box hidden">
            ادفع <span id="cashAmountSpan"></span> ج كاش مقابل شحن <span id="rechargeAmount"></span> ج رصيد صافي.
            
          </div>
          <div id="minBalanceBox" class="info-box error hidden">
            اقل قيمة للشحن هي 20ج صافي.
          </div>
          
          <!-- Phone Number -->
          <div class="form-group">
            <label for="phone">رقم الهاتف المراد شحنه</label>
            <div class="input-with-icon">
              <input type="tel" id="phone" name="phone" placeholder="01012345678" maxlength="11" required>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="phone-icon">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />
              </svg>
            </div>
            <div id="phoneError" class="error-message hidden">رقم الهاتف يجب أن يكون 11 رقم ويبدأ بـ 010</div>
          </div>
          
          <!-- Payment Method -->
          <div class="form-group">
            <label>اختار طريقة الدفع</label>
            <div class="payment-methods">
              <!-- Cash Wallet -->
              <div id="cashMethod" class="payment-method" data-method="cash">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2196F3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4" />
                  <path d="M4 6v12c0 1.1.9 2 2 2h14v-4" />
                  <path d="M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z" />
                </svg>
                <p>محفظة كاش</p>
              </div>
              
              <!-- InstaPay -->
              <div id="instaMethod" class="payment-method" data-method="instapay">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2196F3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="1" y="4" width="22" height="16" rx="2" ry="2" />
                  <line x1="1" y1="10" x2="23" y2="10" />
                </svg>
                <p>انستا باي</p>
              </div>
            </div>
            <input type="hidden" id="paymentMethod" name="paymentMethod" required>
          </div>
          
          <!-- Cash Wallet Instructions (Hidden initially) -->
          <div id="cashInstructions" class="payment-instructions info-box hidden">
            <p class="instruction-text">ابعت على رقم الكاش ده : 01097584431</p>
            
            <div class="form-group">
              <label for="cashSender">اكتب الرقم اللي بعتت منه</label>
              <input type="tel" id="cashSender" name="senderInfo" placeholder="01012345678" maxlength="11">
              <div id="cashSenderError" class="error-message hidden">رقم الهاتف يجب أن يكون 11 رقم</div>
            </div>
          </div>
          
          <!-- InstaPay Instructions (Hidden initially) -->
          <div id="instaInstructions" class="payment-instructions info-box hidden">
            <p class="instruction-text"> على اليوزر ده : mhmdnsar1</p>
            
            <div class="form-group">
              <label for="instaSender"> اكتب اليوزر اللي بعت منه بدون "instapay@"</label>
              <input type="text" id="instaSender" name="senderInfo" placeholder="username123">
              <div id="instaSenderError" class="error-message hidden">اكتب اليوز صح</div>
            </div>
          </div>
          
          <!-- Screenshot Upload (Hidden initially) -->
          <div id="uploadSection" class="form-group">
            <div id="dropArea" class="drop-area">
                <input type="file" id="screenshot" name="image" accept="image/*" class="hidden">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                    <polyline points="17 8 12 3 7 8" />
                    <line x1="12" y1="3" x2="12" y2="15" />
                </svg>
                <p class="upload-text">ارفع اسكرين بالتحويل ..</p>
                <p class="upload-hint">( PNG, JPG حجم الملف حتى 5MB )</p>
            </div>

            <div id="previewContainer" class="preview-container hidden">
                <img id="previewImage" src="" alt="معاينة الصورة">
                <button type="button" id="removeImage" class="remove-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
          </div>
          
          <!-- Submit Button -->
          <button id="submitBtn" type="submit" class="submit-btn" disabled>شحن</button>
        </form>
      </div>
      
      <!-- Success Message (Hidden initially) -->
      <div id="successContainer" class="success-container hidden">
        <div class="success-message">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
            <polyline points="22 4 12 14.01 9 11.01" />
          </svg>
          <h2 class="success-title">تم تقديم الطلب بنجاح</h2>
          <p class="success-subtitle">سيتم معالجة طلبك قريباً</p>
          
          <div class="order-details">
            <h3 class="details-title">تفاصيل الطلب:</h3>
            <ul class="details-list">
              <li><span>كمية الرصيد :</span> <span id="summaryBalance"></span></li>
              <li><span>رقم الهاتف :</span> <span id="summaryPhone"></span></li>
              <li><span>طريقة الدفع :</span> <span id="summaryPaymentMethod"></span></li>
              <li><span>المبلغ المدفوع :</span> <span id="summaryCashAmount"></span></li>
            </ul>
            
            <div class="waiting-status">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="spinner">
                <circle cx="12" cy="12" r="10" />
                <path d="M12 6v6l4 2" />
              </svg>
              برجاء الانتظار...
            </div>
          </div>
          
          <button id="newRequestBtn" type="button" class="new-request-btn">طلب جديد</button>
        </div>
      </div>
    </div>
  </div>

  <a href="https://wa.me/+201208712634" target="_blank" class="whatsapp-support">
    <img src="assets/whatsapp.png" alt="WhatsApp Support" />
    <span class="support-text">الدعم</span>
  </a>
  <script src="main.js"></script>
</body>
</html>
